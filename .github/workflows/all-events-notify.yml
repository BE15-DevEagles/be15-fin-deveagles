name: All Events Notification

on:
  push:
    branches: [main, develop]
  pull_request:
    types: [opened, closed, reopened, ready_for_review, converted_to_draft]
  issues:
    types: [opened, closed, reopened]
  issue_comment:
    types: [created]
  release:
    types: [published]
  create:
  delete:
  watch:
    types: [started]
  fork:
  member:
    types: [added, removed]
  repository:
    types: [publicized, privatized]

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Determine Event Details
        id: event-details
        run: |
          EVENT_NAME="${{ github.event_name }}"
          AUTHOR="${{ github.actor }}"
          REPO="${{ github.repository }}"

          case "$EVENT_NAME" in
            "push")
              TITLE="üìù ÏÉà Ïª§Î∞ã Ìë∏ÏãúÎê®"
              COLOR="5814783"
              DESCRIPTION="**$AUTHOR**ÎãòÏù¥ **${{ github.ref_name }}** Î∏åÎûúÏπòÏóê ${{ github.event.commits[0].message }}Î•º Ìë∏ÏãúÌñàÏäµÎãàÎã§."
              URL="${{ github.event.compare }}"
              ;;
            "pull_request")
              if [ "${{ github.event.action }}" = "opened" ]; then
                TITLE="üîÑ ÏÉà PR ÏÉùÏÑ±Îê®"
                COLOR="16737792"
              elif [ "${{ github.event.action }}" = "closed" ] && [ "${{ github.event.pull_request.merged }}" = "true" ]; then
                TITLE="‚úÖ PR Î≥ëÌï©Îê®"
                COLOR="65280"
              elif [ "${{ github.event.action }}" = "closed" ]; then
                TITLE="‚ùå PR Îã´Ìûò"
                COLOR="15158332"
              else
                TITLE="üîÑ PR ÏóÖÎç∞Ïù¥Ìä∏Îê®"
                COLOR="16737792"
              fi
              DESCRIPTION="**${{ github.event.pull_request.title }}**"
              URL="${{ github.event.pull_request.html_url }}"
              ;;
            "issues")
              if [ "${{ github.event.action }}" = "opened" ]; then
                TITLE="üÜï ÏÉà Ïù¥Ïäà ÏÉùÏÑ±Îê®"
                COLOR="16737792"
              elif [ "${{ github.event.action }}" = "closed" ]; then
                TITLE="‚úÖ Ïù¥Ïäà ÏôÑÎ£åÎê®"
                COLOR="65280"
              else
                TITLE="üîÑ Ïù¥Ïäà ÏóÖÎç∞Ïù¥Ìä∏Îê®"
                COLOR="16737792"
              fi
              DESCRIPTION="**${{ github.event.issue.title }}**"
              URL="${{ github.event.issue.html_url }}"
              ;;
            "issue_comment")
              TITLE="üí¨ Ïù¥ÏäàÏóê ÎåìÍ∏Ä Ï∂îÍ∞ÄÎê®"
              COLOR="11184810"
              DESCRIPTION="**${{ github.event.issue.title }}**Ïóê ÏÉà ÎåìÍ∏Ä"
              URL="${{ github.event.comment.html_url }}"
              ;;
            "release")
              TITLE="üöÄ ÏÉà Î¶¥Î¶¨Ï¶à Î∞úÌñâÎê®"
              COLOR="3066993"
              DESCRIPTION="**${{ github.event.release.tag_name }}** - ${{ github.event.release.name }}"
              URL="${{ github.event.release.html_url }}"
              ;;
            "create")
              if [ "${{ github.event.ref_type }}" = "branch" ]; then
                TITLE="üåø ÏÉà Î∏åÎûúÏπò ÏÉùÏÑ±Îê®"
                DESCRIPTION="**${{ github.event.ref }}** Î∏åÎûúÏπòÍ∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§."
              else
                TITLE="üè∑Ô∏è ÏÉà ÌÉúÍ∑∏ ÏÉùÏÑ±Îê®"
                DESCRIPTION="**${{ github.event.ref }}** ÌÉúÍ∑∏Í∞Ä ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§."
              fi
              COLOR="9936031"
              URL="https://github.com/$REPO"
              ;;
            "delete")
              if [ "${{ github.event.ref_type }}" = "branch" ]; then
                TITLE="üóëÔ∏è Î∏åÎûúÏπò ÏÇ≠Ï†úÎê®"
                DESCRIPTION="**${{ github.event.ref }}** Î∏åÎûúÏπòÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§."
              else
                TITLE="üóëÔ∏è ÌÉúÍ∑∏ ÏÇ≠Ï†úÎê®"
                DESCRIPTION="**${{ github.event.ref }}** ÌÉúÍ∑∏Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§."
              fi
              COLOR="15158332"
              URL="https://github.com/$REPO"
              ;;
            "watch")
              TITLE="‚≠ê ÏÉà Ïä§ÌÉÄ ÌöçÎìù"
              COLOR="16766720"
              DESCRIPTION="**$AUTHOR**ÎãòÏù¥ Î†àÌè¨ÏßÄÌÜ†Î¶¨Ïóê Ïä§ÌÉÄÎ•º ÎàåÎ†ÄÏäµÎãàÎã§!"
              URL="https://github.com/$REPO"
              ;;
            "fork")
              TITLE="üç¥ Î†àÌè¨ÏßÄÌÜ†Î¶¨ Ìè¨ÌÅ¨Îê®"
              COLOR="8359053"
              DESCRIPTION="**$AUTHOR**ÎãòÏù¥ Î†àÌè¨ÏßÄÌÜ†Î¶¨Î•º Ìè¨ÌÅ¨ÌñàÏäµÎãàÎã§!"
              URL="https://github.com/$REPO"
              ;;
            "member")
              if [ "${{ github.event.action }}" = "added" ]; then
                TITLE="üë• ÏÉà Î©§Î≤Ñ Ï∂îÍ∞ÄÎê®"
                DESCRIPTION="**${{ github.event.member.login }}**ÎãòÏù¥ ÌåÄÏóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§."
              else
                TITLE="üë• Î©§Î≤Ñ Ï†úÍ±∞Îê®"
                DESCRIPTION="**${{ github.event.member.login }}**ÎãòÏù¥ ÌåÄÏóêÏÑú Ï†úÍ±∞ÎêòÏóàÏäµÎãàÎã§."
              fi
              COLOR="13369599"
              URL="https://github.com/$REPO"
              ;;
            "repository")
              if [ "${{ github.event.action }}" = "publicized" ]; then
                TITLE="üåç Î†àÌè¨ÏßÄÌÜ†Î¶¨ Í≥µÍ∞úÎê®"
                DESCRIPTION="Î†àÌè¨ÏßÄÌÜ†Î¶¨Í∞Ä Í≥µÍ∞úÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§."
              else
                TITLE="üîí Î†àÌè¨ÏßÄÌÜ†Î¶¨ ÎπÑÍ≥µÍ∞úÎê®"
                DESCRIPTION="Î†àÌè¨ÏßÄÌÜ†Î¶¨Í∞Ä ÎπÑÍ≥µÍ∞úÎ°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§."
              fi
              COLOR="13369599"
              URL="https://github.com/$REPO"
              ;;
            *)
              TITLE="üì¢ Î†àÌè¨ÏßÄÌÜ†Î¶¨ Ïù¥Î≤§Ìä∏"
              COLOR="7506394"
              DESCRIPTION="$EVENT_NAME Ïù¥Î≤§Ìä∏Í∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§."
              URL="https://github.com/$REPO"
              ;;
          esac

          echo "title=$TITLE" >> "$GITHUB_OUTPUT"
          echo "color=$COLOR" >> "$GITHUB_OUTPUT"
          echo "description=$DESCRIPTION" >> "$GITHUB_OUTPUT"
          echo "url=$URL" >> "$GITHUB_OUTPUT"

      - name: Send Discord Notification
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_EVENT_WEBHOOK_URL }}
          TITLE: ${{ steps.event-details.outputs.title }}
          COLOR: ${{ steps.event-details.outputs.color }}
          DESCRIPTION: ${{ steps.event-details.outputs.description }}
          URL: ${{ steps.event-details.outputs.url }}
          AUTHOR: ${{ github.actor }}
          AUTHOR_AVATAR: ${{ github.event.sender.avatar_url }}
          REPO: ${{ github.repository }}
          EVENT_NAME: ${{ github.event_name }}
        run: |
          FORMATTED_DATE=$(date "+%YÎÖÑ %mÏõî %dÏùº %H:%M")

          curl -X POST -H "Content-Type: application/json" \
          -d "{
            \"embeds\": [
              {
                \"title\": \"$TITLE\",
                \"url\": \"$URL\",
                \"color\": $COLOR,
                \"description\": \"$DESCRIPTION\",
                \"author\": {
                  \"name\": \"@$AUTHOR\",
                  \"icon_url\": \"$AUTHOR_AVATAR\"
                },
                \"fields\": [
                  {
                    \"name\": \"üìÅ Î†àÌè¨ÏßÄÌÜ†Î¶¨\",
                    \"value\": \"$REPO\",
                    \"inline\": true
                  },
                  {
                    \"name\": \"üìÖ ÏãúÍ∞Ñ\",
                    \"value\": \"$FORMATTED_DATE\",
                    \"inline\": true
                  }
                ],
                \"footer\": {
                  \"text\": \"GitHub Ïù¥Î≤§Ìä∏ ‚Ä¢ $EVENT_NAME\",
                  \"icon_url\": \"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png\"
                }
              }
            ]
          }" \
          "$DISCORD_WEBHOOK_URL"
